<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CNY Catalog</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #b30000;
    margin: 0;
    padding: 20px;
    color: white;
}

h1 {
    text-align: center;
    color: gold;
}

/* Search */
.search-bar {
    margin: 15px 0;
}
.search-bar input {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
}

/* Products */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 15px;
}

.product-card {
    background: white;
    color: black;
    padding: 15px;
    border-radius: 12px;
}

.product-card h3 {
    margin: 0 0 10px 0;
    font-size: 15px;
}

select, button {
    padding: 8px;
    margin-top: 5px;
    width: 100%;
    border-radius: 6px;
    font-size: 14px;
}

.qty-control {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 5px;
}
.qty-control button {
    width: 35px;
    font-weight: bold;
}
.qty-number {
    font-weight: bold;
}

.add-btn {
    background: #d4af37;
    border: none;
    font-weight: bold;
}

/* Cart */
.cart {
    background: white;
    color: black;
    padding: 15px;
    margin-top: 20px;
    border-radius: 12px;
}
.cart-item {
    border-bottom: 1px solid #ddd;
    padding: 8px 0;
}
.remove-btn {
    background: crimson;
    color: white;
    margin-top: 5px;
}
.whatsapp-btn {
    background: green;
    color: white;
    margin-top: 10px;
}
.clear-btn {
    background: red;
    color: white;
    margin-top: 10px;
}
.total {
    font-weight: bold;
    margin-top: 10px;
}
</style>
</head>
<body>

<h1>üßß CNY Product Catalog üßß</h1>

<div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search product..." onkeyup="renderProducts()">
</div>

<div class="products-grid" id="products"></div>

<div class="cart">
    <h2>üõí Ë¥≠Áâ©ËΩ¶</h2>
    <div id="cartItems"></div>
    <div class="total">
        È¢ÑËÆ°ÊÄªÊï∞Èáè: <span id="totalItems">0</span><br>
        È¢ÑËÆ°ÊÄªÈ¢ù: RM <span id="total">0.00</span>
    </div>
    <button class="whatsapp-btn" onclick="sendWhatsApp()">Send Order via WhatsApp</button>
    <button class="clear-btn" onclick="clearCart()">Clear Cart</button>
</div>

<script>

const products = [

{ name:"PM5050B", options:[{type:"1 Box",price:35},{type:"4 Small Box",price:5}]},
{ name:"PM5050N", options:[{type:"1 Box",price:25},{type:"5 Small Box",price:5}]},
{ name:"JL9500-T", options:[{type:"1 Box",price:25},{type:"1 Small Box",price:3}]},

{ name:"PM4141N", options:[{type:"1 Unit",price:25}]},
{ name:"PM3737N", options:[{type:"1 Unit",price:30}]},
{ name:"PM3030N", options:[{type:"1 Unit",price:20}]},
{ name:"PM99N", options:[{type:"1 Unit",price:20}]},
{ name:"PM1010N", options:[{type:"1 Unit",price:20}]},
{ name:"PM77N", options:[{type:"1 Unit",price:20}]},
{ name:"PM3434N", options:[{type:"1 Unit",price:18}]},
{ name:"PM3232N", options:[{type:"1 Unit",price:15}]},
{ name:"PM1212N", options:[{type:"1 Unit",price:15}]},
{ name:"PM2828N (3 Boxes)", options:[{type:"3 Boxes",price:10}]},
{ name:"PM3838N (3 Boxes)", options:[{type:"3 Boxes",price:10}]},
{ name:"PM3636N (10 Pack)", options:[{type:"10 Pack",price:20}]},
{ name:"PM22N", options:[{type:"1 Unit",price:24}]},
{ name:"11N ÂõõËâ≤Ëä±", options:[{type:"1 Unit",price:18}]},
{ name:"PM11N", options:[{type:"1 Unit",price:16}]},
{ name:"PM3939N", options:[{type:"1 Unit",price:20}]},
{ name:"PM2525N", options:[{type:"1 Unit",price:40}]},
{ name:"PM4848N", options:[{type:"1 Unit",price:88}]},
{ name:"PM4545N", options:[{type:"1 Unit",price:50}]},
{ name:"PM88N", options:[{type:"1 Unit",price:15}]},
{ name:"PM2929N Â∞èÊª°Âñú", options:[{type:"1 Unit",price:18}]},
{ name:"PM44N", options:[{type:"1 Unit",price:22}]},
{ name:"ADN9898 3 inch", options:[{type:"1 Unit",price:15}]},
{ name:"PM4242N", options:[{type:"1 Unit",price:15}]},
{ name:"PM66N", options:[{type:"1 Unit",price:15}]},
{ name:"0024 Áæé‰∫∫È±º", options:[{type:"1 Unit",price:25}]},
{ name:"JL9955 Peacock", options:[{type:"1 Unit",price:25}]},
{ name:"4040N 3Âèë", options:[{type:"1 Unit",price:40}]},
{ name:"PM4040N", options:[{type:"1 Unit",price:40}]},
{ name:"PM4444N", options:[{type:"1 Unit",price:18}]},
{ name:"PM1111N", options:[{type:"1 Unit",price:16}]},
{ name:"PM2626N", options:[{type:"1 Unit",price:22}]},
{ name:"PM4747N 4pcs", options:[{type:"4 pcs",price:32}]},
{ name:"4747N 3pcs", options:[{type:"3 pcs",price:24}]},
{ name:"3737 Wolf", options:[{type:"1 Unit",price:35}]},
{ name:"JL9966", options:[{type:"1 Unit",price:48}]},
{ name:"3030 8in1", options:[{type:"1 Unit",price:25}]}

];

let cart = [];

function changeQty(index, change){
    const qtySpan = document.getElementById(`qty-${index}`);
    let value = parseInt(qtySpan.innerText);
    value += change;
    if(value < 1) value = 1;
    qtySpan.innerText = value;
}

function renderProducts(){
    const search = document.getElementById("searchInput").value.toLowerCase();
    const container = document.getElementById("products");
    container.innerHTML = "";

    products
    .filter(p => p.name.toLowerCase().includes(search))
    .forEach((product,index)=>{
        container.innerHTML += `
        <div class="product-card">
            <h3>${product.name}</h3>

            <select id="select-${index}">
                ${product.options.map(opt=>`<option value="${opt.price}">${opt.type} - RM ${opt.price}</option>`).join("")}
            </select>

            <div class="qty-control">
                <button onclick="changeQty(${index},-1)">-</button>
                <div class="qty-number" id="qty-${index}">1</div>
                <button onclick="changeQty(${index},1)">+</button>
            </div>

            <button class="add-btn" onclick="addToCart(${index})">Add to Cart</button>
        </div>
        `;
    });
}

function addToCart(index){
    const select=document.getElementById(`select-${index}`);
    const qty=parseInt(document.getElementById(`qty-${index}`).innerText);
    const option=select.options[select.selectedIndex];
    const name=products[index].name;
    const type=option.text;
    const price=parseFloat(option.value);

    const existing=cart.find(i=>i.name===name && i.type===type);

    if(existing){
        existing.qty+=qty;
    }else{
        cart.push({name,type,price,qty});
    }

    updateCart();
}

function updateCart(){
    const div=document.getElementById("cartItems");
    div.innerHTML="";
    let total=0,totalItems=0;

    cart.forEach((item,i)=>{
        let itemTotal=item.price*item.qty;
        total+=itemTotal;
        totalItems+=item.qty;

        div.innerHTML+=`
        <div class="cart-item">
        ${item.name} - ${item.type} √ó ${item.qty}<br>
        RM ${itemTotal.toFixed(2)}
        <button class="remove-btn" onclick="removeItem(${i})">Remove</button>
        </div>`;
    });

    document.getElementById("total").innerText=total.toFixed(2);
    document.getElementById("totalItems").innerText=totalItems;
}

function removeItem(index){
    cart.splice(index,1);
    updateCart();
}

function clearCart(){
    cart=[];
    updateCart();
}

function sendWhatsApp(){
    if(cart.length===0){alert("Cart is empty!");return;}

    let message="Hello, I would like to order:%0A%0A";
    cart.forEach(item=>{
        message+=`- ${item.name} (${item.type}) x ${item.qty}%0A`;
    });
    message+=`%0AÈ¢ÑËÆ°ÊÄªÊï∞Èáè: ${document.getElementById("totalItems").innerText}`;
    message+=`%0AÈ¢ÑËÆ°ÊÄªÈ¢ù: RM ${document.getElementById("total").innerText}`;

    window.open(`https://wa.me/60147093773?text=${message}`,"_blank");
}

renderProducts();

</script>
</body>
</html>
